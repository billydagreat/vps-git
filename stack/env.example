# vps-git -- copy to stack/.env and fill in real values.
# Ansible does this automatically during deploy.

# Role: "primary" or "standby"
ROLE=primary
COMPOSE_PROFILES=primary

# App
APP_NAME=vps-git
APP_URL=https://git.example.com
FORGE_IMAGE=codeberg.org/forgejo/forgejo:11

# Postgres
POSTGRES_DB=forgejo
POSTGRES_USER=forgejo
POSTGRES_PASSWORD=CHANGEME
REPL_USER=replicator
REPL_PASSWORD=CHANGEME

# Network
# Primary binds Postgres on 0.0.0.0 so standby can replicate.
# Standby binds on 127.0.0.1 only.
PG_BIND=0.0.0.0

# The NetBird IP of the OTHER node (peer).
# Primary: set to standby IP.  Standby: set to primary IP.
PEER_HOST=

# Backup -- how often (in seconds) the sidecar runs pg_dump + rsync to standby.
# This controls the RPO for Forgejo git data on disk (repos, LFS, attachments).
# Database changes replicate in real-time via Postgres streaming replication
# regardless of this value.
#   60   = every minute  (minimal data loss, slightly more I/O)
#   300  = every 5 min   (good balance)
#   900  = every 15 min  (default, lighter on resources)
BACKUP_INTERVAL=60
BACKUP_SSH_KEY=/root/.ssh/id_ed25519
